 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Prevoyez votre transport</title>
	<link href="../static/bootstrap/css/jquery-ui-bootstrap.css" rel="stylesheet" type="text/css"/>
	<link rel='stylesheet' href='../static/bootstrap/css/bootstrap.css' type="text/css"/>
	    <link rel="stylesheet" href="../jquery-ui-1.8.12.custom.css" type="text/css" /> 
    <script type="text/javascript" src="../jquery.min.js"></script>
    <script type="text/javascript" src="../jquery-ui-1.8.12.custom.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=fr"></script>
    <script type="text/javascript" src="../functions.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	  <style type="text/css">
    body{font-family:Arial;background:#000000;margin:0px;padding:0px;}
    #container{position:relative;width:990px;margin:auto;background:#FFFFFF;padding:20px 0px 20px 0px;}
    #container h1{margin:0px 0px 10px 20px;}
    #container #map{width:700px;height:500px;margin:auto;}
    #container #panel{width:700px;margin:auto;}
    #container #destinationForm{margin:0px 0px 20px 0px;background:#EEEEEE;padding:10px 20px;border:solid 1px #C0C0C0;}
    #container #destinationForm input[type=text]{border:solid 1px #C0C0C0;}
  </style>
	<script>
		$(function() {
		    $(document).ready( function() {
			
				$('#city').attr('disabled','disabled');
				$('#city2').attr('disabled','disabled');
			
			});	
			$('#city').focus( function() {
				
				$(this).autocomplete( "search", "" );
				
			});
			$('#city2').focus( function() {
				
				$(this).autocomplete( "search", "" );
				
			});
			// OnKeyDown Function
			$("#zip").keyup(function() {
				var zip_in = $(this);
				var zip_box = $('#zipbox');
				
				if (zip_in.val().length<5)
				{
					zip_box.removeClass('error success');
				}
				else if ( zip_in.val().length>5)
				{
					zip_box.addClass('error').removeClass('success');
				}
				else if ((zip_in.val().length == 5) ) 
				{
					
					// Make HTTP Request
					$.ajax({
						url: "http://api.zippopotam.us/fr/" + zip_in.val(),
						cache: false,
						dataType: "json",
						type: "GET",
					  success: function(result, success) {

							// Enable the city box
							$('#city').removeAttr('disabled');
							
							// FR Post Code Returns multiple location
							suggestions = [];
							for ( ii in result['places']){
								suggestions.push(result['places'][ii]['place name']);
							}
							$("#city").autocomplete({ source : suggestions , delay:50, disabled: false, minLength:0 });
							if ( suggestions.length > 0){
								$('#city').placeholder = suggestions[0];
							}
							zip_box.addClass('success').removeClass('error');
						},
						error: function(result, success) {
							zip_box.removeClass('success').addClass('error');
						}
					});
				}
	});
	// OnKeyDown Function
			$("#zip2").keyup(function() {
				var zip_in = $(this);
				var zip_box = $('#zipbox2');
				
				if (zip_in.val().length<5)
				{
					zip_box.removeClass('error success');
				}
				else if ( zip_in.val().length>5)
				{
					zip_box.addClass('error').removeClass('success');
				}
				else if ((zip_in.val().length == 5) ) 
				{
					
					// Make HTTP Request
					$.ajax({
						url: "http://api.zippopotam.us/fr/" + zip_in.val(),
						cache: false,
						dataType: "json",
						type: "GET",
					  success: function(result, success) {

							// Enable the city box
							$('#city2').removeAttr('disabled');
							
							// FR Post Code Returns multiple location
							suggestions = [];
							for ( ii in result['places']){
								suggestions.push(result['places'][ii]['place name']);
							}
							$("#city2").autocomplete({ source : suggestions , delay:50, disabled: false, minLength:0 });
							if ( suggestions.length > 0){
								$('#city2').placeholder = suggestions[0];
							}
							zip_box.addClass('success').removeClass('error');
						},
						error: function(result, success) {
							zip_box.removeClass('success').addClass('error');
						}
					});
				}
	});
		});
			
	</script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30975659-1']);
	  _gaq.push(['_setDomainName', 'zippopotam.us']);
	    _gaq.push(['_trackPageview']);

		  (function() {
		      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					    })();

	</script>
</head>

<body>
	<br/	>
	<br/	>
	<div class="container">
	<div class="span8">
	<div class='hero-unit'>
		<h2>Votre trajet:</h2>
		<form action="#" method="post" class="form fancy-form">

			<fieldset>
				<legend>Adresse de départ:</legend>
				<div>
					<div id="zipbox" class="control-group">
						<label for="zip">Code Postal</label>
						<input type="text" class='' pattern="[0-9]*" name="zip" id="zip" placeholder="Tapez votre code postal"/>
					</div>	
				</div>
				<div>
					<div id="citybox" class="control-group" >
						<label for="city">Ville</label>
						<input type="text" name="city" id="city" placeholder="D'abord taper votre code postal" />
					</div>
				</div>
			</fieldset>
			</form>	
			<form action="#" method="post" class="form fancy-form">
			<fieldset>
				<legend>Adresse arrivée:</legend>
				<div>
					<div id="zipbox2" class="control-group">
						<label for="zip2">Code Postal</label>
						<input type="text" class='' pattern="[0-9]*" name="zip" id="zip2" placeholder="Tapez votre code postal"/>
					</div>	
				</div>
				<div>
					<div id="citybox2" class="control-group" >
						<label for="city2">Ville</label>
						<input type="text" name="city" id="city2" placeholder="D'abord taper votre code postal" />
					</div>
				</div>
			</fieldset>
				<div>
					<input type="button" value="Afficher l'itinéraire" onclick="javascript:calculate()">
				</div>
		</form>	

    <div id="container">
        <div id="panel"></div>
        <div id="map">
            <p>Veuillez patienter pendant le chargement de la carte...</p>
        </div>
	</div>
	</div>
	</div>
							</div>
</body>
      <!-- Include Javascript -->
    <script type="text/javascript" src="../jquery-ui-1.8.12.custom.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=fr"></script>
    <script type="text/javascript" src="../functions.js"></script>
</html> 